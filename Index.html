<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VietMRO Icebreaker Game</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        :root {
            --navy: #0f2e52;
            --cyan: #00a9e0;
            --gold: #fdb913;
            --white: #ffffff;
            --grey-light: #f0f4f8;
        }

        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--grey-light);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            color: var(--navy);
        }

        /* Header */
        header {
            background: linear-gradient(90deg, var(--navy) 0%, var(--cyan) 100%);
            width: 100%;
            padding: 20px;
            text-align: center;
            color: var(--white);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        header h1 {
            margin: 0;
            font-size: 28px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        header p {
            margin: 5px 0 0;
            opacity: 0.9;
        }

        /* Game Container */
        .game-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            margin-top: 40px;
            padding: 20px;
            width: 100%;
            max-width: 800px;
        }

        /* Wheel Styles */
        .wheel-wrapper {
            position: relative;
            width: 350px;
            height: 350px;
            margin-bottom: 30px;
        }

        #wheelCanvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            box-shadow: 0 10px 20px rgba(15, 46, 82, 0.2);
            transition: transform 4s cubic-bezier(0.25, 0.1, 0.25, 1);
        }

        .pointer {
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-top: 30px solid var(--navy);
            z-index: 10;
            filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3));
        }

        .center-circle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            background-color: var(--white);
            border: 4px solid var(--gold);
            border-radius: 50%;
            display: grid;
            place-items: center;
            font-weight: bold;
            color: var(--navy);
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            z-index: 5;
        }

        /* Controls */
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            padding: 12px 30px;
            font-size: 18px;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-weight: bold;
            transition: transform 0.2s, box-shadow 0.2s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #spinBtn {
            background-color: var(--gold);
            color: var(--navy);
            box-shadow: 0 4px 0 #dfa000;
        }

        #spinBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 0 #dfa000;
        }

        #spinBtn:active {
            transform: translateY(2px);
            box-shadow: 0 0 0 #dfa000;
        }

        #spinBtn:disabled {
            background-color: #ccc;
            color: #666;
            box-shadow: none;
            cursor: not-allowed;
            transform: none;
        }

        /* Question Display Card */
        .question-card {
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            text-align: center;
            max-width: 600px;
            width: 90%;
            border-top: 6px solid var(--cyan);
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
        }

        .question-card.show {
            opacity: 1;
            transform: translateY(0);
        }

        .question-card h3 {
            color: var(--navy);
            font-size: 24px;
            margin-top: 0;
        }

        .question-card p {
            color: #555;
            font-size: 18px;
            line-height: 1.5;
        }

        .icon-box {
            width: 60px;
            height: 60px;
            background: #e0f7fa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--cyan);
            font-size: 30px;
        }

        /* Confetti Effect */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--gold);
            animation: fall linear forwards;
            z-index: 100;
        }

        @keyframes fall {
            to { transform: translateY(100vh) rotate(720deg); }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .wheel-wrapper { width: 280px; height: 280px; }
            h1 { font-size: 20px; }
        }
    </style>
</head>
<body>

<header>
    <h1><i class="fa-solid fa-users-rays"></i> Vòng Quay Kết Nối</h1>
    <p>Khởi động năng lượng VietMRO</p>
</header>

<div class="game-container">
    
    <!-- The Wheel -->
    <div class="wheel-wrapper">
        <div class="pointer"></div>
        <canvas id="wheelCanvas" width="500" height="500"></canvas>
        <div class="center-circle"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRz-hH5g1uT_UoXhS-j6E8Xy5Qz5Qz5Qz5Qz5&s" alt="" style="width: 40px; opacity: 0.8; display:none;">MRO</div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button id="spinBtn" onclick="spin()"><i class="fa-solid fa-rotate"></i> Quay Ngay</button>
    </div>

    <!-- Result Area -->
    <div id="resultCard" class="question-card">
        <div class="icon-box">
            <i class="fa-solid fa-gift"></i>
        </div>
        <h3 id="resultTitle">Sẵn sàng chưa?</h3>
        <p id="resultText">Nhấn nút "Quay Ngay" để nhận câu hỏi thử thách của bạn!</p>
    </div>

</div>

<script>
    // --- CONFIGURATION ---
    const colors = ['#0f2e52', '#00a9e0', '#fdb913', '#0f2e52', '#00a9e0', '#fdb913']; // Navy, Cyan, Gold repeating
    const questions = [
        "Chia sẻ một thói quen 'kỳ quặc' của bạn?",
        "Món ăn nào bạn có thể ăn cả tuần không chán?",
        "Kỷ niệm vui nhất ngày đầu tiên đi làm tại VietMRO?",
        "Nếu có 1 siêu năng lực, bạn sẽ chọn gì?",
        "Mô tả người ngồi bên phải bạn bằng 1 tính từ vui vẻ!",
        "Bài hát 'tủ' của bạn khi đi Karaoke là gì?",
        "Một địa điểm du lịch bạn nhất định phải đi trước tuổi 50?",
        "Điều gì khiến bạn cười nhiều nhất trong tuần qua?"
    ];

    // --- WHEEL LOGIC ---
    const canvas = document.getElementById('wheelCanvas');
    const ctx = canvas.getContext('2d');
    const spinBtn = document.getElementById('spinBtn');
    const resultCard = document.getElementById('resultCard');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');
    const iconBox = document.querySelector('.icon-box i');

    let startAngle = 0;
    const arc = Math.PI / (questions.length / 2); // Divide circle
    let spinTimeout = null;
    let spinAngleStart = 10;
    let spinTime = 0;
    let spinTimeTotal = 0;
    let isSpinning = false;

    function drawRouletteWheel() {
        const outsideRadius = 240;
        const textRadius = 170;
        const insideRadius = 50;

        ctx.clearRect(0,0,500,500);

        ctx.font = 'bold 16px Roboto';

        for(let i = 0; i < questions.length; i++) {
            const angle = startAngle + i * (2 * Math.PI / questions.length); // Calculate angle for each slice
            
            // Draw Slice
            ctx.fillStyle = colors[i % colors.length];
            ctx.beginPath();
            ctx.arc(250, 250, outsideRadius, angle, angle + (2 * Math.PI / questions.length), false);
            ctx.arc(250, 250, insideRadius, angle + (2 * Math.PI / questions.length), angle, true);
            ctx.stroke();
            ctx.fill();

            // Draw Text (Numbers or Short Text)
            ctx.save();
            ctx.fillStyle = "white";
            ctx.translate(250 + Math.cos(angle + (Math.PI / questions.length)) * textRadius, 
                          250 + Math.sin(angle + (Math.PI / questions.length)) * textRadius);
            ctx.rotate(angle + (Math.PI / questions.length) + Math.PI / 2);
            ctx.fillText((i + 1), -ctx.measureText(i + 1).width / 2, 0);
            ctx.restore();
        }
    }

    function spin() {
        if(isSpinning) return;
        isSpinning = true;
        spinBtn.disabled = true;
        resultCard.classList.remove('show'); // Hide previous result
        
        spinAngleStart = Math.random() * 10 + 10; // Random starting speed
        spinTime = 0;
        spinTimeTotal = Math.random() * 3 + 4 * 1000; // Random spin time between 4-7 seconds
        
        rotateWheel();
    }

    function rotateWheel() {
        spinTime += 30;
        if(spinTime >= spinTimeTotal) {
            stopRotateWheel();
            return;
        }
        
        // Easing function (easeOut)
        const spinAngle = spinAngleStart - easeOut(spinTime, 0, spinAngleStart, spinTimeTotal);
        startAngle += (spinAngle * Math.PI / 180);
        drawRouletteWheel();
        spinTimeout = setTimeout('rotateWheel()', 30);
    }

    function stopRotateWheel() {
        clearTimeout(spinTimeout);
        
        const degrees = startAngle * 180 / Math.PI + 90;
        const arcd = 360 / questions.length;
        const index = Math.floor((360 - degrees % 360) / arcd);
        
        ctx.save();
        ctx.font = 'bold 30px Roboto';
        const text = questions[index];
        ctx.restore();

        // Show Result
        showResult(text);
        
        isSpinning = false;
        spinBtn.disabled = false;
        
        // Trigger Confetti
        createConfetti();
    }

    function easeOut(t, b, c, d) {
        const ts = (t/=d)*t;
        const tc = ts*t;
        return b+c*(tc + -3*ts + 3*t);
    }

    function showResult(text) {
        resultTitle.innerText = "Câu hỏi dành cho bạn:";
        resultText.innerText = text;
        
        // Random Icon
        const icons = ['fa-star', 'fa-heart', 'fa-bolt', 'fa-puzzle-piece', 'fa-lightbulb'];
        iconBox.className = `fa-solid ${icons[Math.floor(Math.random() * icons.length)]}`;
        
        resultCard.classList.add('show');
    }

    // Confetti Effect
    function createConfetti() {
        const colors = ['#0f2e52', '#00a9e0', '#fdb913'];
        for (let i = 0; i < 50; i++) {
            const confetti = document.createElement('div');
            confetti.classList.add('confetti');
            confetti.style.left = Math.random() * 100 + 'vw';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
            document.body.appendChild(confetti);
            
            setTimeout(() => confetti.remove(), 5000);
        }
    }

    // Init
    drawRouletteWheel();

</script>

</body>
</html>